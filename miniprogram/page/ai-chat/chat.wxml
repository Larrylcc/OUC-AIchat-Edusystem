<!--å®šä¹‰é¡µé¢å¸ƒå±€ï¼Œè®¾è®¡å¯¹è¯ç•Œé¢-->
<!-- filepath: /miniprogram/pages/ai-chat/ai-chat.wxml -->
<view class="chat-container">
  <image class="bg-image" src="{{backgroundImage}}" mode="aspectFill"></image>
  <!-- æ ‡é¢˜æ  -->
  <view class="header">
    <view class="header-avatar">D</view>
    <text class="header-title">DeepSeek</text>
    <picker mode="selector" range="{{options}}" bindchange="handlePickerChange">
    <view class="picker-display">
      {{selectedOption}}
      <text class="picker-display-icon">â–¼</text>
    </view>
  </picker>
  </view>

  <!-- æ¶ˆæ¯åˆ—è¡¨ -->
  <view class="message-list">
    <block wx:for="{{messages}}" wx:key="index">
      <view class="{{item.sender === 'user' ? 'message user' : 'message ai'}}">
        <!-- å¦‚æœæ˜¯AIæ¶ˆæ¯ï¼Œä½¿ç”¨rich-textæ¸²æŸ“ -->
        <rich-text wx:if="{{item.sender === 'ai'}}" nodes="{{item.text}}"></rich-text>
        <!-- ç”¨æˆ·æ¶ˆæ¯ä¿æŒåŸæ · -->
        <text wx:else>{{item.text}}</text>
      </view>
    </block>
    <view wx:if="{{isThinking}}" class="message ai">
      <text>AIæ­£åœ¨å…¨åŠ›æ€è€ƒğŸ¤”</text>
    </view>
  </view>

  <!-- è¾“å…¥æ¡† -->
  <view class="input-container">
    <input
      class="input"
      type="text"
      placeholder="è¯·è¾“å…¥..."
      value="{{inputText}}"
      bindinput="handleInput"
    />
    <button class="send-button" bindtap="sendMessage">å‘é€</button>
  </view>
</view>

